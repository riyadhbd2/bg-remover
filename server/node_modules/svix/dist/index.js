"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Svix = exports.messageInRaw = void 0;
const authentication_1 = require("./api/authentication");
const application_1 = require("./api/application");
const background_task_1 = require("./api/background_task");
const endpoint_1 = require("./api/endpoint");
const event_type_1 = require("./api/event_type");
const integration_1 = require("./api/integration");
const message_1 = require("./api/message");
const message_attempt_1 = require("./api/message_attempt");
const operational_webhook_endpoint_1 = require("./api/operational_webhook_endpoint");
const statistics_1 = require("./api/statistics");
const request_1 = require("./request");
const openapi = require("./openapi");
__exportStar(require("./openapi/models/all"), exports);
__exportStar(require("./openapi/apis/exception"), exports);
__exportStar(require("./webhook"), exports);
var message_2 = require("./api/message");
Object.defineProperty(exports, "messageInRaw", { enumerable: true, get: function () { return message_2.messageInRaw; } });
const REGIONS = [
    { region: "us", url: "https://api.us.svix.com" },
    { region: "eu", url: "https://api.eu.svix.com" },
    { region: "in", url: "https://api.in.svix.com" },
];
class UserAgentMiddleware {
    pre(context) {
        context.setHeaderParam("User-Agent", `svix-libs/${request_1.LIB_VERSION}/javascript`);
        return Promise.resolve(context);
    }
    post(context) {
        return Promise.resolve(context);
    }
}
class Svix {
    constructor(token, options = {}) {
        var _a, _b, _c;
        const regionalUrl = (_a = REGIONS.find((x) => x.region === token.split(".")[1])) === null || _a === void 0 ? void 0 : _a.url;
        const baseUrl = (_c = (_b = options.serverUrl) !== null && _b !== void 0 ? _b : regionalUrl) !== null && _c !== void 0 ? _c : "https://api.svix.com";
        this.requestCtx = { baseUrl, token, timeout: options.requestTimeout };
        this._configuration = openapi.createConfiguration({
            baseServer: new openapi.ServerConfiguration(baseUrl, {}),
            promiseMiddleware: [new UserAgentMiddleware()],
            authMethods: {
                HTTPBearer: {
                    tokenProvider: {
                        getToken: () => token,
                    },
                },
            },
        });
    }
    get authentication() {
        return new authentication_1.Authentication(this.requestCtx);
    }
    get application() {
        return new application_1.Application(this.requestCtx);
    }
    get endpoint() {
        return new endpoint_1.Endpoint(this.requestCtx);
    }
    get eventType() {
        return new event_type_1.EventType(this.requestCtx);
    }
    get integration() {
        return new integration_1.Integration(this.requestCtx);
    }
    get message() {
        return new message_1.Message(this.requestCtx);
    }
    get messageAttempt() {
        return new message_attempt_1.MessageAttempt(this.requestCtx);
    }
    get backgroundTask() {
        return new background_task_1.BackgroundTask(this.requestCtx);
    }
    get statistics() {
        return new statistics_1.Statistics(this.requestCtx);
    }
    get operationalWebhookEndpoint() {
        return new operational_webhook_endpoint_1.OperationalWebhookEndpoint(this.requestCtx);
    }
}
exports.Svix = Svix;
//# sourceMappingURL=index.js.map